<%= form_for([@assignment,@answer], remote: true) do |f| %>
  <% if @answer.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@answer.errors.count, "error") %> prohibited this answer from being saved:</h2>

      <ul>
      <% @answer.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="assignment_instructions">
    <h1><%= link_to @answer.assignment.title, @answer.assignment %></h1>

    <div class="assignment-description">
      <%= sanitize @answer.assignment.description %>
    </div>
  </div>
  <div class="row">
    <div class="assignment-rubric span4">
      <p>Here's how this assignment will be assessed.</p>
      <p>Show reviews for <div class="btn-group">
        <button type="button" class="btn dropdown-toggle active-revision" data-toggle="dropdown">
          <%= @answer.revision_name %> <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          <% @answer.versions.each do |v| %>
          <li><%= link_to v.revision_name, answer_reviews_path(v), remote: true %></li>
          <% end %>
        </ul>
      </div>
    </p>
      <style type="text/css">
      .rubric {margin: 0;}
      .rubric li {list-style-type: none;}
      </style>
      <div class="assignment-rubric-content"%>
        <ul class="rubric">
          <% @answer.assignment.rubric_items.each do |r| %>
          <li>
            <strong><%= r.short_title %></strong> <span class="pull-right label">Max: <%=r.max %> (<%= r.max_label%>)</span><br/>
            <legend></legend>
            <%= sanitize r.title %>
          </li>
          <% end %>
        </ul>    
    </div>
    </div>

    <div class="field span8">
      <p>Write your response below. </p><legend></legend>
      <%= f.text_area :response, :id=>"answer_response", :class=>"hidden_field" %>
      <div class="editable" id="response_richedit" data-syncwith="answer_response" data-placeholder="Type your response here. Highlight text for formatting options. <%= "Please save your answer before you add images" if @answer.new_record? %>">
        <%= @answer.response.html_safe unless @answer.response.nil? %>
      </div>

      <div class="actions">
        <div class="input-append">
        <%= f.text_field :revision_name, placeholder:"Enter a revision name" %>
        <%= f.submit "Save Revision", class: "btn"%> 
        </div>
        <em class="answer-save-status">Unsaved</em>
        
        
      </div>
    </div>
  </div>
  <% if current_user.admin? %>
    <div class="field">
      <%= f.label :question_id %><br>
      <%= f.number_field :question_id %>
    </div>
    <div class="field">
      <%= f.label :user_id %><br>
      <%= f.number_field :user_id %>
    </div>
    <div class="field">
      <%= f.label :predicted_score %><br>
      <%= f.text_field :predicted_score %>
    </div>
    <div class="field">
      <%= f.label :current_score %><br>
      <%= f.text_field :current_score %>
    </div>
    <div class="field">
      <%= f.label :evaluations_wanted %><br>
      <%= f.number_field :evaluations_wanted %>
    </div>
    <div class="field">
      <%= f.label :total_evaluations %><br>
      <%= f.number_field :total_evaluations %>
    </div>
    <div class="field">
      <%= f.label :confidence %><br>
      <%= f.text_field :confidence %>
    </div>
  <% end -%>

<% end %>
